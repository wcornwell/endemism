unclear$reason[15] <- 'ng data error'
unclear$current_knowledge[16] <- 'non-endemic'
unclear$reason[16] <- 'taxonomy error, NZ species'
unclear$genus[16]
unclear$genus
unclear$genus[17]
unclear$genus[18]
wcvp$genus['Chorizema']
chorizema <- wcvp[wcvp$genus == 'Chorizema']
View(chorizema)
unclear$current_knowledge[18] <- 'unclear'
unclear$reason[18] <- 'introduced India'
unclear$genus[19]
unclear$genus[20]
unclear$genus[21]
unclear$genus[21]
unclear$genus[22]
cyathodes <- wcvp[wcvp$genus == 'Cyathodes']
View(cyathodes)
unclear$genus[22]
unclear$current_knowledge[22] <- 'endemic'
unclear$reason[22] <- 'taxonomic confusion, tasmania only'
unclear$genus[23]
unclear$current_knowledge[22] <- 'endemic'
unclear$reason[22] <- 'taxonomic confusion, tasmania only'
unclear$current_knowledge[23] <- 'non-endemic'
unclear$reason[23] <- 'species found in Africa, Americas, South Asia etc'
unclear$genus[23]
unclear$genus[24]
View(indo)
Dichopogon <- indo[indo$Genus == 'Dichopogon']
Dichopogon <- indo[indo$Genus == 'Dichopogon']
Dichopogon <- indo[indo$Genus == 'Dichopogon']
'Dichopogon' %in% indo$Genus
unclear$genus[24]
unclear$genus[25]
unclear$current_knowledge[25] <- 'non-endemic'
unclear$reason[25] <- 'found in americas'
unclear$genus[26]
unclear$current_knowledge[21] <- 'non-endemic'
unclear$current_knowledge[22] <- 'endemic'
unclear$reason[22] <- 'taxonomic confusion, tasmania only'
unclear$current_knowledge[23] <- 'non-endemic'
unclear$current_knowledge[24] <- 'endemic'
unclear$current_knowledge[25] <- 'non-endemic'
unclear$reason[25] <- 'found in americas'
unclear$current_knowledge[26] <- 'non-endemic'
unclear$genus[27]
duma <- wcvp[wcvp$genus == 'Duma']
View(duma)
unclear$genus[28]
unclear$genus[28]
unclear$genus[29]
unclear$current_knowledge[29] <- 'non-endemic'
unclear$reason[29] <- 'dist in South America'
unclear$genus[30]
unclear$current_knowledge[30] <- 'non-endemic'
unclear$reason[30] <- 'dist in PNG'
unclear$genus[31]
unclear$current_knowledge[31] <- 'endemic'
unclear$reason[31] <- 'introdced to india - POWO mismatch'
unclear$genus[32]
unclear$genus[32]
unclear$current_knowledge[32] <- 'endemic'
unclear$reason[32] <- 'ALA error (Georgiella species entered as Georgeantha'
unclear$genus[33]
unclear$current_knowledge[33] <- 'nonendemic'
unclear$reason[33] <- 'Madagascar distribution'
unclear$genus[34]
unclear$current_knowledge[33] <- 'non-endemic'
unclear$current_knowledge[34] <- 'endemic'
unclear$reason[34] <- 'introdced to New Zealand - POWO mismatch
unclear$reason[34] <- 'introdced to New Zealand - POWO mismatch'
unclear$reason[34] <- 'introdced to New Zealand - POWO mismatch'
unclear$genus[35]
unclear$current_knowledge[35] <- 'unclear'
unclear$reason[35] <- 'not sure about the taxonomics here - justicia?'
unclear$genus[36]
unclear$genus[36]
unclear$genus[37]
unclear$genus[38]
unclear$genus[38]
unclear$current_knowledge[38] <- 'endemic'
unclear$genus[39]
unclear$reason[38] <- 'ALA data error'
unclear$current_knowledge[39] <- 'endemic'
unclear$reason[39] <- 'ALA data error'
unclear$genus[40]
library(tidyverse)
summary <- read_csv('intermediate_data/five_sources_summary.csv')
unclear <- summary[summary$current_knowledge == 'unclear', ]
unclear$reason <- NA
unclear$reason <- NA
unclear$genus
unclear$current_knowledge[1] <- 'endemic'
unclear$reason[1] <- 'ALA taxonomy error'
unclear$current_knowledge[2] <- 'non-endemic'
unclear$reason[2] <- 'taxonomy error'
unclear$current_knowledge[3] <- 'endemic'
unclear$reason[3] <- 'POWO data error'
unclear$reason[4] <- 'records from 1950s, PNG occurence uncertain'
unclear$current_knowledge[5] <- 'endemic'
unclear$current_knowledge[6] <- 'endemic'
unclear$reason[6] <- 'Indo data error'
unclear$current_knowledge[7] <- 'endemic'
unclear$reason[7] <- 'POWO data error'
unclear$current_knowledge[8] <- 'non-endemic'
unclear$reason[8] <- 'NC occurence'
unclear$current_knowledge[9] <- 'non-endemic'
unclear$reason[9] <- 'taxonomic error - synonym Machaerina used'
unclear$current_knowledge[10] <- 'non-endemic'
unclear$reason[10] <- 'PNG native'
unclear$reason[12] <- 'ALA data/shapefile error'
unclear$current_knowledge[13] <- 'endemic'
unclear$reason[13] <- 'ornamental plant in UK'
unclear$current_knowledge[14] <- 'endemic'
unclear$reason[14] <- 'taxonomic uncertainty - WCVP says 4 species, zimbabwe flora mentions only 1 accepted species'
unclear$current_knowledge[15] <- 'endemic'
unclear$reason[15] <- 'ng data error'
unclear$current_knowledge[16] <- 'non-endemic'
unclear$reason[16] <- 'taxonomy error, NZ species'
unclear$current_knowledge[17] <- 'endemic'
unclear$reason[17] <- 'introduced NZ and California'
unclear$current_knowledge[18] <- 'endemic'
unclear$current_knowledge[19] <- 'non-endemic'
unclear$reason[19] <- 'species found in South America'
unclear$current_knowledge[20] <- 'unclear'
unclear$reason[20] <- 'introduced ornamentals in UK'
unclear$current_knowledge[21] <- 'non-endemic'
unclear$reason[21] <- 'species found in Africa, Americas, South Asia etc'
unclear$current_knowledge[22] <- 'endemic'
unclear$reason[22] <- 'taxonomic confusion, tasmania only'
unclear$current_knowledge[23] <- 'non-endemic'
unclear$reason[23] <- 'species found in Africa, Americas, South Asia etc'
unclear$current_knowledge[24] <- 'endemic'
unclear$reason[24] <- 'taxonomic error in indo data'
unclear$current_knowledge[25] <- 'non-endemic'
unclear$reason[25] <- 'found in americas'
unclear$current_knowledge[26] <- 'non-endemic'
unclear$reason[26] <- 'found in PNG POWO taxonomic confusion'
unclear$current_knowledge[27] <- 'endemic'
unclear$reason[27] <- 'POWO error'
unclear$current_knowledge[28] <- 'unclear'
unclear$reason[28] <- 'endemic based on API class - taxonomic differences in POWO'
unclear$current_knowledge[29] <- 'non-endemic'
unclear$reason[29] <- 'dist in South America'
unclear$current_knowledge[30] <- 'non-endemic'
unclear$reason[30] <- 'dist in PNG'
unclear$current_knowledge[31] <- 'endemic'
unclear$reason[31] <- 'introdced to india - POWO mismatch'
unclear$current_knowledge[32] <- 'endemic'
unclear$reason[32] <- 'ALA error (Georgiella species entered as Georgeantha'
unclear$current_knowledge[33] <- 'non-endemic'
unclear$reason[33] <- 'Madagascar distribution'
unclear$current_knowledge[34] <- 'endemic'
unclear$reason[34] <- 'introdced to New Zealand - POWO mismatch'
unclear$current_knowledge[35] <- 'unclear'
unclear$reason[35] <- 'not sure about the taxonomics here - justicia?'
unclear$reason[36] <- 'endemic to lord howe - record in NZ?'
unclear$current_knowledge[37] <- 'endemic'
unclear$reason[37] <- 'taxonomic confusion - unplaced in POWO'
unclear$current_knowledge[38] <- 'endemic'
unclear$reason[38] <- 'ALA data error'
unclear$current_knowledge[39] <- 'endemic'
unclear$reason[39] <- 'ALA data error'
unclear$current_knowledge[40] <- 'non-endemic'
unclear$reason[40] <- 'distribution in Chile'
unclear$current_knowledge[41] <- 'endemic'
unclear$reason[41] <- 'ALA data error'
unclear$current_knowledge[42] <- 'non-endemic'
unclear$reason[42] <- 'species found in Africa, Asia, Australia'
unclear$current_knowledge[43] <- 'endemic'
unclear$reason[43] <- 'Indo data error'
unclear$current_knowledge[44] <- 'non-endemic'
unclear$reason[44] <- 'species endemic to Norfolk Island'
unclear$current_knowledge[45] <- 'endemic'
unclear$reason[45] <- 'introduced to NZ and India'
unclear$current_knowledge[46] <- 'endemic'
unclear$reason[46] <- 'ALA data error'
unclear$current_knowledge[47] <- 'endemic'
unclear$reason[47] <- 'ALA data error'
unclear$current_knowledge[48] <- 'endemic'
unclear$reason[48] <- 'introduced to India'
unclear$current_knowledge[49] <- 'endemic'
unclear$reason[49] <- 'introduced to Czechia'
unclear$current_knowledge[50] <- 'non-endemic'
unclear$current_knowledge[51] <- 'non-endemic'
unclear$reason[51] <- 'species found in Europe, Africa, Asia, Australia'
unclear$current_knowledge[52] <- 'endemic'
unclear$reason[52] <- 'WVCP data error'
unclear$current_knowledge[53] <- 'endemic'
unclear$reason[53] <- 'ALA data error'
unclear$current_knowledge[54] <- 'endemic'
unclear$reason[54] <- 'introduced to Great Britain'
unclear$current_knowledge[55] <- 'endemic'
unclear$reason[55] <- 'introduced to Great Britain'
unclear$current_knowledge[56] <- 'non-endemic'
unclear$reason[56] <- 'synonym for Ochrosia, found across SE & E asia' #Neisosperma
unclear$current_knowledge[57] <- 'non-endemic'
unclear$reason[57] <- 'synonym for Apostasia, found in SE Asia' #Niemeyera
unclear$current_knowledge[58] <- 'endemic'
unclear$reason[58] <- 'Limited PNG occurrence - introduced, flagged as basis of record invalid' #Oraniopsis
unclear$current_knowledge[59] <- 'non-endemic'
unclear$reason[59] <- 'Known to be native to Bolivia and Chile' #Orites
unclear$current_knowledge[60] <- 'non-endemic'
unclear$reason[60] <- 'Known to be native to Mexico and South America' #Orthrosanthus
unclear$current_knowledge[61] <- 'non-endemic'
unclear$reason[61] <- 'Cosmopolitan genera - synonym: Hemionitis' #Paraceterach
unclear$current_knowledge[62] <- 'endemic'
unclear$reason[62] <- 'Data error - single preserved specimen from PNG' #Peripentadenia
unclear$current_knowledge[63] <- 'non-endemic'
unclear$reason[63] <- 'synonym for Arthrochilus- single sp. in PNG' #Phoringopsis
unclear$current_knowledge[64] <- 'non-endemic'
unclear$reason[64] <- 'synonym for Phreatia' #Plexaure
unclear$current_knowledge[65] <- 'non-endemic'
unclear$reason[65] <- 'synonym for Caltha' #Psychrophila
unclear$current_knowledge[66] <- 'endemic'
unclear$reason[66] <- 'WCVP Data error - single 200 year old record in NZ' #Pyrorchis
unclear$current_knowledge[67] <- 'endemic'
unclear$reason[67] <- 'Data duplication of incorrect point' #Rhinerrhiza
unclear$current_knowledge[68] <- 'non-endemic'
unclear$reason[68] <- 'synonym for Phreatia' #Rhipidorchis
unclear$current_knowledge[69] <- 'endemic'
unclear$reason[69] <- 'Introduced and grown as an ornamental' #Rhodanthe
unclear$current_knowledge[70] <- 'endemic'
unclear$reason[70] <- 'Introduced into NZ, UK, & USA' #Rumicastrum
#Selliera
"Goodenia" %in% indo$Genus
unclear$current_knowledge[71] <- 'non-endemic'
unclear$reason[71] <- 'Synonym with Goodenia'
#Seorsus
unclear$current_knowledge[72] <- 'endemic'
unclear$reason[72] <- 'wcvp incorrect, found in PNG'
#Seringia
unclear$current_knowledge[73] <- 'endemic'
unclear$reason[73] <- 'Taxonomy mix up'
#Sersalisia
unclear$current_knowledge[74] <- 'non-endemic'
unclear$reason[74] <- 'Found in PNG and Malaysia as well'
#Solori
unclear$current_knowledge[75] <- 'non-endemic'
unclear$reason[75] <- 'Synonym with Brachypterum, found in southern Asia'
#Stawellia
unclear$current_knowledge[76] <- 'endemic'
unclear$reason[76] <- 'Outlier in Indo data, only one point'
#Stuartina
unclear$current_knowledge[77] <- 'endemic'
unclear$reason[77] <- 'Introduced to Britain'
#Swainsona
unclear$current_knowledge[78] <- 'endemic'
unclear$reason[78] <- 'Small numbers outside, botanical gardens'
"Aleurites" %in% nc$Genre
unclear$current_knowledge[79] <- 'non-endemic'
unclear$reason[79] <- 'Synonym with Aleurites'
"Ardisia" %in% nz$Genus
unclear$current_knowledge[80] <- 'non-endemic'
unclear$reason[80] <- 'Synonym with Ardisia'
#Trichocline
unclear$current_knowledge[81] <- 'non-endemic'
unclear$reason[81] <- 'Found in South America as well'
#Triodia
unclear$current_knowledge[82] <- 'endemic'
unclear$reason[82] <- 'Error in occurrence data, single occurrences outside Australia (oriental/botanical gardens)'
#Tristania
unclear$current_knowledge[83] <- 'endemic'
unclear$reason[83] <- 'Changes in species within genus'
"Websteria" %in% indo$Genus
unclear$current_knowledge[84] <- 'non-endemic'
unclear$reason[84] <- 'Native to US and found else where in the world'
"Westringia" %in% ng$Genus
unclear$current_knowledge[85] <- 'non-endemic'
unclear$reason[85] <- 'Found in NZ, ALA incorrect'
#Wittsteinia
unclear$current_knowledge[86] <- 'non-endemic'
unclear$reason[86] <- 'Found in New Caledonia and Papua New Guinea'
"Yakirra foliolosa" %in% indo$Name
unclear$current_knowledge[87] <- 'non-endemic'
unclear$reason[5] <- 'POWO data error'
unclear$reason[11] <- 'ALA data/shapefile error'
unclear$reason[18] <- 'introduced India'
View(unclear)
unclear$current_knowledge[50] <- 'non-endemic'
unclear$reason[50] <- 'species found in Americas and Australia'
unclear$reason[87] <- 'Found in Myanmar'
summary$reason <- NA
merged_summary <- merge(summary, unclear, by = 'genus', all.x = TRUE)
View(merged_summary)
View(summary)
summary <- unclear[unclear$current_knowledge != "unclear", ]
merged_df <- merge(unclear, summary, by = 'genus', all = TRUE)
merged_df <- merged_df[order(merged_df$genus), ]
View(merged_df)
library(tidyverse)
summary <- read_csv('intermediate_data/five_sources_summary.csv')
summary <- read_csv('intermediate_data/five_sources_summary.csv')
unclear <- summary[summary$current_knowledge == 'unclear', ]
summary <- read_csv('intermediate_data/five_sources_summary.csv')
library(tidyverse)
summary <- read.csv('intermediate_data/five_sources_summary.csv')
summary <- read.csv('intermediate_data/five_sources_summary.csv')
summary <- readcsv('intermediate_data/five_sources_summary.csv')
setwd("C:/Users/adele/Documents/BEES3041/endemism/endemism")
summary <- read_csv('intermediate_data/five_sources_summary.csv')
summary <- read.csv('intermediate_data/five_sources_summary.csv')
summary <- read.csv('intermediate_data/five_sources_summary.csv')
summary <- read_csv('intermediate_data/five_sources_summary.csv')
#install packages
#load libraries
library(tidyr)
library(tidyverse)
library(data.table)
#read csvs
genus_end <- read.csv("data/australian_flora/genus_level_endemism_estimate.csv")
wcvp <- fread(file = "data/wcvp/wcvp_names.csv", header = T)
#install packages
#load libraries
library(tidyr)
library(tidyverse)
library(data.table)
#read csvs
genus_end <- read.csv("data/australian_flora/genus_level_endemism_estimate.csv")
#wcvp <- fread(file = "data/wcvp/wcvp_names.csv", header = T)
#wcvp_distribution <- fread(file = "data/wcvp/wcvp_distribution.csv", header = T)
ng <- read.csv("data/other_countries_floras/sa_2022-07-12_072627325-BRAHMSOnlineData.csv")
nz <- fread("data/other_countries_floras/checklistofthenewzealandflora-seedplantsseptember2020.tsv")
nz2 <- fread("data/other_countries_floras/checklistofthenewzealandflora-fernsandlycophytesseptember2020.tsv")
nc <- read.csv("data/other_countries_floras/Florical_vers_7_I_2022.csv")
indo <- read.csv("data/other_countries_floras/oo_377596.csv")
redlist <- read.csv(file = "data/redlist_species_data_australia/simple_summary.csv", header = T)
redlist <- read.csv(file = "data/REDLIST_Folder/simple_summary.csv", header = T)
fivesource <- read.csv(file = "intermediate_data/five_sources_summary.csv", header = T) #Contains outside Aus proportions and endemicity estimates
library(dplyr)
library(data.table)
redlist <- redlist %>%
filter(genusName %in% fivesource$genus) #Filters redlist data to only include genera within fivesource data
unique(redlist$redlistCategory)
#[1] "Endangered"                 "Critically Endangered"      "Vulnerable"
#[4] "Least Concern"              "Near Threatened"            "Lower Risk/near threatened"
#[7] "Data Deficient"             "Extinct"
print(redlist[redlist$redlistCategory == "Extinct", ]) #Is Extinct required, should remove?
#redlist <- redlist %>%
#filter(redlistCategory != "Extinct")
unique(redlist$genusName) #`182 genera`
counts <- redlist %>% #Creating counts frame for each threatened status
group_by(genusName) %>%
count(redlistCategory) %>%
pivot_wider(names_from = redlistCategory, values_from = n, values_fill = NA)
# Join the counts with fivesource.trial based on genera2
genus_with_status <- fivesource %>%
left_join(counts, by = c("genus" = "genusName")) %>% #Lower Risk/ Near Threatened has one value - Maybe combine with Near Threatened?
mutate_at(c(14:21), ~replace_na(.,0))
#Maybe add proportions??
View(genus_with_status)
options(max.print = 10000)
print(rowSums(genus_with_status[14:21], na.rm = T) > genus_with_status$species_number)
comparison_result <- rowSums(genus_with_status[14:21], na.rm = TRUE) > genus_with_status$species_number
print(genus_with_status[comparison_result, ])
#Arthrotaxis has 2 vulnerable and 1 endangered, with 2 recorded species
#Genoplesium has one recorded spcies, but has critically endangered and one endangered
#Polypogon has one species but 2 least-concern
print(redlist[redlist$genusName == "Athrotaxis", ]) #Athrotaxis laxifolia, Athrotaxis cupressoides, Athrotaxis selaginoides
print(redlist[redlist$genusName == "Genoplesium", ]) #Genoplesium insigne, #Genoplesium baueri
print(redlist[redlist$genusName == "Polypogon", ]) #Polypogon viridis, Polypogon monspeliensis
write_csv(genus_with_status,"intermediate_data/endemism_redlist_status")
#install packages
#load libraries
library(tidyr)
library(tidyverse)
library(data.table)
#read csvs
genus_end <- read.csv("data/australian_flora/genus_level_endemism_estimate.csv")
#wcvp <- fread(file = "data/wcvp/wcvp_names.csv", header = T)
#wcvp_distribution <- fread(file = "data/wcvp/wcvp_distribution.csv", header = T)
ng <- read.csv("data/other_countries_floras/sa_2022-07-12_072627325-BRAHMSOnlineData.csv")
nz <- fread("data/other_countries_floras/checklistofthenewzealandflora-seedplantsseptember2020.tsv")
nz2 <- fread("data/other_countries_floras/checklistofthenewzealandflora-fernsandlycophytesseptember2020.tsv")
nc <- read.csv("data/other_countries_floras/Florical_vers_7_I_2022.csv")
indo <- read.csv("data/other_countries_floras/oo_377596.csv")
redlist <- read.csv(file = "data/REDLIST_Folder/simple_summary.csv", header = T)
fivesource <- read.csv(file = "intermediate_data/summary_current.csv", header = T) #Contains outside Aus proportions and endemicity estimates
#combine nz and nz2
nz <- rbind(nz, nz2)
#make new df for genus that are possibly endemic (ie score a 1 on genus_end df)
ausplants <- subset(genus_end, prop_endemic == 1)
#remove ? from genus column value in nz data
nz$Genus <- gsub("\\?", "", nz$Genus)
#make a subset for the genus in nz data that appear to have no genus
no_genera_nz <- subset(nz, Genus == "")
nrow(no_genera_nz) #324 - a problem for another day
nz<-filter(nz, Origin!="Exotic")
ausplants$nz <- ausplants$genus %in% nz$Genus
ausplants$nc <- ausplants$genus %in% nc$Genre
ausplants$ng <- ausplants$genus %in% ng$Genus
ausplants$indo <- ausplants$genus %in% indo$Genus
wcvp_comb <- wcvp_distribution %>%
left_join(wcvp, by = 'plant_name_id')
wcvp_comb <- wcvp_distribution %>%
left_join(wcvp, by = 'plant_name_id')
summary <- read_csv('intermediate_data/summary_current.csv')
View(summary)
genus_list <- summary$genus
install.packages("austraits")
install.packages("austraits")
library(austraits)
devtools::install_github("traitecoevo/austraits")
devtools::install_github("traitecoevo/austraits")
austraits <- load_austraits(version = "4.1.0", path = "intro/downloads")
austraits_joined <- left_join(austraits[["traits"]], austraits[["taxa"]], by = "taxon_name")
genus_austraits <- austraits_joined[austraits_joined$taxon_name %in% genus_list, ]
View(genus_austraits)
non_matching_genus <- species_list[!(genus_list %in% austraits_joined$taxon_name)]
non_matching_genus <- genus_list[!(genus_list %in% austraits_joined$taxon_name)]
print(non_matching_genus)
View(austraits_joined)
genus_austraits1 <- austraits_joined[grepl(paste(genus_list, collapse = "|"), austraits_joined$taxon_name), ]
View(genus_austraits)
genus_list
View(genus_austraits1)
View(genus_austraits1)
View(genus_austraits)
genus_austraits1$taxon_name == 'Agonis'
length(genus_austraits1$taxon_name == 'Agonis')
print('true')
species_list <- unique(genus_austraits1$taxon_name)
austraits_genera <- austraits$traits %>%
filter(taxon_name %in% species_list)
austraits_genera <- austraits_genera %>%
select(taxon_name, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
View(austraits_genera)
austraits_species <- austraits$traits %>%
filter(taxon_name %in% species_list)
austraits_species <- austraits_genera %>%
select(taxon_name, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
austraits_species <- austraits_species %>%
select(taxon_name, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
library(dplyr)
austraits_genera <- austraits_species %>%
group_by(first_word = word(taxon_name, 1)) %>%
summarize(across(everything(), ~ unlist(.)))
concat_lists <- function(x) {
if (is.list(x)) {
unlist(x)
} else {
x
}
}
# Group the dataframe by the first word of taxon_name
austraits_genera <- austraits_species %>%
group_by(first_word = word(taxon_name, 1)) %>%
summarize(across(everything(), concat_lists))
View(austraits_species)
austraits_species <- austraits_species %>%
mutate(first_word = word(taxon_name, 1))
View(austraits_species)
austraits_species[434]
austraits_species <- austraits$traits %>%
filter(taxon_name %in% species_list)
austraits_genera <- austraits_species %>%
select(first_word, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
austraits_species <- austraits_species %>%
mutate(first_word = word(taxon_name, 1))
austraits_species <- austraits_species %>%
mutate(first_word = word(taxon_name, 1))
austraits_genera <- austraits_species %>%
select(first_word, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
View(austraits_genera)
austraits_species <- austraits$traits %>%
filter(taxon_name %in% species_list)
austraits_species <- austraits_species %>%
mutate(genus = word(taxon_name, 1))
austraits_species <- austraits_species %>%
mutate(genus = word(taxon_name, 1))
austraits_genera <- austraits_species %>%
select(genus, trait_name, value) %>%
pivot_wider(names_from = trait_name, values_from = value)
?left_join
summary_with_traits <- left_join(summary, austraits_genera, by = 'genus')
View(summary_with_traits)
View(austraits_genera)
genus_in_ausgen <- austraits_genera$genus
non_matching <- genus_in_ausgen[!(species_list %in% summary$genus)]
print(non_matching)
non_matching <- genus_in_ausgen[!(genus_in_ausgen %in% summary$genus)]
print(non_matching)
View(summary)
summary_with_all_traits <- left_join(summary, austraits_genera, by = 'genus')
summary_traits <- summary_with_all_traits[, c(1:22,28,3642,49)]
summary_traits <- summary_with_all_traits[, c(1:22,28,36,42,49)]
View(summary_traits)
write.csv(summary_traits, 'intermediate_date/summary_with_traits.csv')
write.csv(summary_traits, 'intermediate_data/summary_with_traits.csv')
write.table(summary_traits, "intermediate_data/summary_with_traits.csv", sep = ",", row.names = FALSE)
summary_traits <- summary_traits %>%
mutate(across(where(is.list), as.character))
View(summary_traits)
write.csv(summary_traits, 'intermediate_data/summary_with_traits.csv')
wcvp_distribution <- read_csv('data/wcvp/wcvp_distribution.csv')
wcvp <- read_csv('data/wcvp/wcvp_names.csv')
wcvp <- read_csv('data/wcvp/wcvp_names.csv')
cvp_comb <- wcvp_distribution %>%
left_join(wcvp, by = 'plant_name_id')
sort(unique(wcvp_comb$region)) #does not provide country, but general geographic region
wcvp_aus <- wcvp_comb %>%
filter(region == "Australia")
wcvp_comb <- wcvp_distribution %>%
left_join(wcvp, by = 'plant_name_id')
wcvp <- read_csv('data/wcvp/wcvp_names.csv')
